Index: new/qapi-schema.json
===================================================================
--- new.orig/qapi-schema.json	2014-05-05 07:54:16.000000000 +0200
+++ new/qapi-schema.json	2014-05-05 08:09:23.000000000 +0200
@@ -3431,6 +3431,8 @@
 #
 # @default: #optional whether the machine is default
 #
+# @current: #optional whether this machine is currently used
+#
 # @cpu-max: maximum number of CPUs supported by the machine type
 #           (since 1.5.0)
 #
@@ -3438,7 +3440,7 @@
 ##
 { 'type': 'MachineInfo',
   'data': { 'name': 'str', '*alias': 'str',
-            '*is-default': 'bool', 'cpu-max': 'int' } }
+            '*is-default': 'bool', '*is-current': 'bool', 'cpu-max': 'int' } }
 
 ##
 # @query-machines:
Index: new/vl.c
===================================================================
--- new.orig/vl.c	2014-05-05 07:54:16.000000000 +0200
+++ new/vl.c	2014-05-05 08:14:33.000000000 +0200
@@ -1673,6 +1673,11 @@
         info->name = g_strdup(m->name);
         info->cpu_max = !m->max_cpus ? 1 : m->max_cpus;
 
+        if (strcmp(m->name, MACHINE_GET_CLASS(current_machine)->qemu_machine->name) == 0) {
+            info->has_is_current = true;
+            info->is_current = true;
+        }
+
         entry = g_malloc0(sizeof(*entry));
         entry->value = info;
         entry->next = mach_list;
